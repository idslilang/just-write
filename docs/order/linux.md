### Linux命令

#### 1. 查看服务器的CPU

- cat /proc/cpuinfo |grep "cpu cores"|wc -l 查看每个物理cpu中的core个数：

#### 2. ll，ls命令

- ls  ：显示当前目录下所有的文件

- ls -a ：列出所有文件，包括以 "." 开头的隐含文件。

- ll  ：显示当前文件或目录的详细信息，含有时间、读写权限、大小、时间等信息，等于是 ls -l 命令

#### 3. du命令

用于显示目录或文件的大小

du -sh * ：查询当前目录下所有的文件的大小以K，M，G为单位，提高信息的可读性。

#### 4. cat命令

cat ：输出当前文件内容。

- - 场景：一般就是用来查看当前文件的内容，比如说要看下服务器的启动service.sh脚本文件中的内容(cat service.sh)

  - 扩展：`cat -n fileName`  输出文件内容并且在前面加上行号。

  - 扩展：`cat -b fileName`  输出文件内容并且在前面加上行号，与上面的不同是会过滤空白行。

  - 扩展：`cat -n textfile1 > textfile2` 把 textfile1 的文档内容加上行号后输入 textfile2 这个文档里。

    

#### 5. more命令 ：

跟cat差不多，但是有一个优点就是展示出来的是按照页的形式出来，可以接着按`space空格键`向下翻页

- 扩展：`more -num` 一次显示行数。

- 扩展：`more +num` 从第num行开始显示。

  

#### 6. chmod命令

- r=4,w=2,x=1，所以想要rxw 读写和可执行权限，那就是`4+2+1=7`，而一个位数表示一个角色，`chmod a=rwx txt1.txt`就可以理解为就是 `chmod 777 txt1.txt`

- u 表示该文件的拥有者，g 表示与该文件的拥有者属于同一个群体(group)者，o 表示其他以外的人，a 表示这三者皆是
- \+ 表示增加权限、- 表示取消权限、= 表示唯一设定权限
- r 表示可读取，w 表示可写入，x 表示可执行
- 场景：chmod这个命令实用比较广泛，但是说白了就是一点更改文件权限，但是权限这个东西怎么加，是加所有用户还是其他？是加读写还是去除读写？这个就需要理解 **u、g、o、a**、**+、-、=**、**r、w、x**等含义
- 扩展：`chmod ugo+r txt1.txt` 或者 `chmod a+r txt1.txt` 设置txt1.txt 对所有的用户角色可读
- 扩展：`chmod 777 file` ，chmod也可以用数字来代表权限问题，



#### 7. grep命令

用于查找文件里符合条件的字符串,在日志查询中用的非常多。

- grep "aaa"  server.log -A 10 在server.log中搜索aaa字符串,除了显示符合搜索条件的那一列之外，并显示该行之后的10行内容
- grep "aaa" log.log -B 10 除了显示符合搜索条件的那一列之外，并显示该行之前的10行内容
- grep "aaa" log.log | grep "bb" -A 10,同时搜索满足条件以上两个条件的结果，并向下在打印剩下的10行。
- grep "aaa" log.log ｜ wc -l，统计满足条件的的次数

- grep "aaa" log.log -C 10 显示搜索到的"aaa"字符串的前后10行
- zgrep 用法同grep相同，搜索服务器中的压缩后的.gz文件中的内容



#### 8. kill命令

删除执行中的程序或工作，如果我们要使用的某个端口被占用了，但是我们又没有找到，可以ps查一下进程ID，然后kill一下


- 扩展：`kill 14269`，杀死**14269**这个进程
- 扩展：`kill -KILL 14269`，强制杀死**14269**这个进程
- 扩展：`kill -9 14269`，彻底杀死**14269**这个进程



#### 9. rm命令

用于删除一个文件或者目录。在使用这个命令之前需要注意，不要随便执行这个命令，文件一旦通过rm命令删除，则无法恢复。

- rm server.log ，删除 server.log 文件？会跳出一个确定提示，输入 y，则是删除
- rm -f server.log，不会产生确认删除提示，直接删除文件
- rm -rf server.log，不会产生确认删除提示，直接删除文件,如果是文件夹会把当前目录下的所有文件一并删除，非常的暴力。



#### 10.ps命令

用于显示当前进程的状态，主要是用来查询当前进程的状态，比如说需要查询一下当前tomcat的相关信息，或者说服务器配置的tomcat的一些启动参数，都是可以看到。

- ps -ef | grep 进程关键字，查询某个关键字的进程，如下所示，能显示很多信息

  ```
  ps -ef|grep java
  ```

- ps -A，列出所有的进程

- ps -aux，显示所有包含其他使用者的行程



#### 11. tail 命令

用于查看文件的内容。通常比如说我们需要查看正在变动的日志文件，那就可以用这个命令了。

- 扩展：`tail -f filename`，会把 filename 文件里的最尾部的内容显示出来，并且不断刷新，只要 filename 更新就可以看到最新的文件内容。
- 扩展：`tail -20f filename`，会把 filename 文件里的最后的20行内容显示出来，并且不断刷新。
- 扩展：`tail -c 20 filename`，显示文件 filename 的最后 20 个字符。
- 扩展：`tail -n +20 filename`，显示文件 filename 的内容，从第 20 行至文件末尾。



#### 12. 负载命令

负载是对当前CPU的工作量的一个度量，通常负载越低，说明机器工作轻松，反之则越累，高负载的情况下就可能会出现机器无法处理其他的业务请求了。



查看负载的命令有很多，top、uptime 最常用



##### 12.1 uptime

```
 8:09  up 7 days, 25 mins, 2 users, load averages: 3.50 4.69 5.76
```

load average：0.39, 0.34, 0.39  这三个数字的意思分别是1分钟、5分钟、15分钟内系统的平均负荷

user：2 user，当前两个用户登入前面显示的信息就是服务器启动到现在已经有多长时间了。

##### 12.2 top

```
$top
top - 01:19:56 up 319 days, 14:11,  1 user,  load average: 0.13, 0.25, 0.35
Tasks: 145 total,   1 running, 144 sleeping,   0 stopped,   0 zombie
%Cpu(s):  2.8 us,  0.9 sy,  0.3 ni, 95.6 id,  0.1 wa,  0.0 hi,  0.2 si,  0.2 st
KiB Mem :  8173324 total,   142188 free,  5861548 used,  2169588 buff/cache
KiB Swap:        0 total,        0 free,        0 used.  1634952 avail Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7704 www       20   0 9714024 4.824g   5932 S  27.6 61.9   3717:34 java
 2150 root      30  10  785008  58672  35804 S   1.7  0.7   3254:22 polaris-agent
16043 www       20   0 3800732 402604   3788 S   0.3  4.9 603:29.85 java
    1 root      20   0   43536   3396   1948 S   0.0  0.0  56:12.32 systemd
```

一般来说只要负载超过0.7可能就表示当前负载有点高了，需要排查一下，这个是针对单核CPU来说的，如果是多核CPU来说，我们就是CPU核数乘以0.7来计算的。



在top显示的进程信息的时候，我们可能看到当前进程中 140这个进程占用CPU最高。我们可以看看这个进程下的线程在做什么。



##### 12.3 



#### 13. CPU命令



